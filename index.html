<!-- KeepMoviEZ  v5.0.1 -->
<!DOCTYPE html>
<html lang="en">
<!-- START CHUNK: Document Head and Core Dependencies -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>KeepMoviEZ</title>
    <link rel="icon" type="image/x-icon" href="favicon.png">
    <!-- Primary Meta Tags -->
    <title>KeepMoviEZ - Smart Movie & Series Tracker | Log, Rate & Visualize</title>
    <meta name="title" content="KeepMoviEZ - Smart Movie & Series Tracker | Log, Rate & Visualize">
    <meta name="description" content="KeepMoviEZ is your personal smart movie and series tracking app.">
    <meta name="keywords" content="KeepMoviEZ, movie tracker, media collection">
    <meta name="robots" content="index, follow">
    <meta name="author" content="KeepMoviEZ Team">
    <link rel="canonical" href="keepmoviez.nishantadhikari.info.np">

    <!-- Local Libraries (CSS) -->
    <link href="libs/css/bootstrap.min.css" rel="stylesheet">
    <link href="libs/css/all.min.css" rel="stylesheet"> <!-- Font Awesome -->
    
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;900&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="style.css">

    <!-- PWA Manifest and Theme -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#2C3E50">
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">

    <!-- Critical Local JS Libraries -->
    <script src="libs/js/crypto-js.min.js"></script>
    <script src="libs/js/supabase.min.js"></script>

<!-- END CHUNK: Document Head and Core Dependencies -->
<body>
    
<!-- START CHUNK: Overlays -->
    <div id="loadingOverlay" class="loading-overlay">
        <i class="fas fa-spinner fa-spin fa-3x text-primary"></i>
        <p class="mt-3 text-white ">Loading...</p>
    </div>
    <div id="themeTransitionOverlay" class="theme-transition-overlay"></div>
<!-- END CHUNK: Overlays -->

<!-- START CHUNK: Authentication Form -->
    <div id="authContainer" class="auth-container">
        <div class="auth-card">
            <h4 id="authTitle" class="text-center mb-4">Welcome to KeepMoviEZ !</h4>
            <p id="authMessage" class="text-muted text-center mb-3">Please sign in or create an account to continue.</p>

            <div id="supabaseAuthForm">
                <div class="form-group">
                    <label for="supabaseEmail">Email</label>
                    <input type="email" id="supabaseEmail" class="form-control" placeholder="your@email.com" required>
                </div>
                <div class="form-group">
                    <label for="supabasePassword">Password</label>
                    <input type="password" id="supabasePassword" class="form-control" placeholder="Your password" required>
                </div>
                <div id="authError" class="alert alert-danger mt-2" style="display:none;"></div>
                <button id="supabaseLoginBtn" class="btn btn-primary btn-block mt-3">Login</button>
                <button id="supabaseSignupBtn" class="btn btn-outline-info btn-block mt-2">Sign Up</button>

                <div class="text-center my-3 text-muted">OR</div>

                <button id="supabaseGoogleSignInBtn" class="btn btn-light btn-block border">
                    <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google logo" style="height: 18px; margin-right: 10px;">
                </button>

                <button id="supabasePasswordResetBtn" class="btn btn-link btn-block mt-2">Forgot Password?</button>
            </div>

            <div id="passwordSetupSection" style="display:none;">
                <h5 class="text-center mb-3">Set a New Password</h5>
                <p class="text-muted text-center small mb-3">You have been redirected from a password reset link. Please enter and confirm your new password.</p>
                <div class="form-group">
                    <label for="newPassword">New Password</label>
                    <input type="password" id="newPassword" class="form-control" placeholder="Enter new password" required>
                </div>
                 <div class="form-group">
                    <label for="confirmNewPassword">Confirm New Password</label>
                    <input type="password" id="confirmNewPassword" class="form-control" placeholder="Confirm new password" required>
                </div>
                <div id="passwordResetError" class="alert alert-danger mt-2" style="display:none;"></div>
                <button id="updatePasswordBtn" class="btn btn-primary btn-block mt-3">Update Password</button>
            </div>
        </div>
    </div>
<!-- END CHUNK: Authentication Form -->

<!-- START CHUNK: Off-Canvas Application Menu -->
    <div id="appMenuBackdrop" class="offcanvas-backdrop"></div>
    <div id="appMenu" class="offcanvas-menu shadow-lg">
        <div class="offcanvas-header d-flex justify-content-between align-items-center p-3 border-bottom">
            <h5 class="mb-0">KeepMoviEZ </h5>
            <button type="button" class="close" data-dismiss="offcanvas" aria-label="Close">
                <span aria-hidden="true">×</span>
            </button>
        </div>
        <div class="offcanvas-body p-0">
            <div class="user-section p-3 border-bottom">
                <span id="menuLoggedInUserEmail" class="d-block mb-1 small text-muted">Not logged in</span>
                <span id="menuOnlineStatusIndicator" class="badge badge-pill badge-danger" title="Online Status">Offline</span>
            </div>
            <div class="list-group list-group-flush">
                <button id="menuThemeToggleBtn" class="list-group-item list-group-item-action d-flex align-items-center">
                    <i class="fas fa-sun mr-2"></i> Theme
                </button>
                <!-- NEW Import/Pull Button -->
                <button id="menuImportBtn" class="list-group-item list-group-item-action d-flex align-items-center">
                    <i class="fas fa-cloud-download-alt mr-2"></i> Import
                </button>
                <!-- NEW Export/Push Button -->
                <button id="menuExportBtn" class="list-group-item list-group-item-action d-flex align-items-center">
                    <i class="fas fa-cloud-upload-alt mr-2"></i> Export
                </button>
                <!-- Standard Sync Button -->
                <button id="menuSyncDataBtn" class="list-group-item list-group-item-action d-flex align-items-center">
                    <i class="fas fa-sync-alt mr-2"></i> Sync with Cloud
                </button>
                <!-- Erase Data Button -->
                <button id="menuEraseDataBtn" class="list-group-item list-group-item-action d-flex align-items-center text-danger">
                    <i class="fas fa-eraser mr-2"></i> Erase Data
                </button>
            </div>
            <div class="mt-3 mb-2 px-3 small text-muted">Insights & Stats</div>
            <div class="list-group list-group-flush">
                <button class="list-group-item list-group-item-action d-flex align-items-center" data-toggle="modal" data-target="#dailyRecommendationModal" data-dismiss-menu="true">
                    <i class="fas fa-calendar-day mr-2"></i> Daily Recommendation
                </button>
                <button class="list-group-item list-group-item-action d-flex align-items-center" data-toggle="modal" data-target="#personalizedSuggestionsModal" data-dismiss-menu="true">
                    <i class="fas fa-magic mr-2"></i>Engine Suggestions
                </button>
                <button class="list-group-item list-group-item-action d-flex align-items-center" data-toggle="modal" data-target="#achievementsModal" data-dismiss-menu="true">
                    <i class="fas fa-trophy mr-2"></i> Achievements
                </button>
                <button class="list-group-item list-group-item-action d-flex align-items-center" data-toggle="modal" data-target="#chartsModal" data-dismiss-menu="true">
                    <i class="fas fa-chart-pie mr-2"></i> Visual Data
                </button>
                <button class="list-group-item list-group-item-action d-flex align-items-center" data-toggle="modal" data-target="#detailedStatsModal" data-dismiss-menu="true">
                    <i class="fas fa-table mr-2"></i>Stats
                </button>
                <!-- MODIFIED: Added About and Docs links -->
                <button class="list-group-item list-group-item-action d-flex align-items-center" data-toggle="modal" data-target="#aboutModal" data-dismiss-menu="true">
                    <i class="fas fa-info-circle mr-2"></i> About
                </button>
                <a href="docs/index.html" target="_blank" class="list-group-item list-group-item-action d-flex align-items-center">
                    <i class="fas fa-book mr-2"></i> Documentation
                </a>
            </div>
            <div class="offcanvas-footer p-3 mt-auto border-top">
            <button id="menuSupabaseLogoutBtn" class="btn btn-outline-warning btn-block"><i class="fas fa-sign-in-alt"></i></button>
        </div>
        </div>
    </div>
<!-- END CHUNK: Off-Canvas Application Menu -->

<!-- START CHUNK: Import / Pull -->
    <div class="modal fade" id="importModal" tabindex="-1" role="dialog" aria-labelledby="importModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="importModalLabel">Import Data</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                </div>
                <div class="modal-body">
                    <h6>Force Pull from Cloud</h6>
                    <p class="small text-muted">This will erase all local data on this device and replace it with your data from the cloud. This is useful for syncing a new device or resolving major data conflicts.</p>
                    <button class="btn btn-warning btn-block" id="forcePullTriggerBtn"><i class="fas fa-cloud-download-alt"></i> Force Pull from Cloud</button>
                    <hr>
                    <h6>Import from File</h6>
                    <p class="small text-muted">Upload a CSV or JSON file to add or update your collection. You will be guided by the Smart Import Assistant.</p>
                    <div class="custom-file">
                        <input type="file" class="custom-file-input" id="menuCsvFileUploader" accept=".csv,.json">
                        <label class="custom-file-label" for="menuCsvFileUploader">Choose CSV/JSON file...</label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
<!-- END CHUNK: Import / Pull -->

<!-- START CHUNK: Export / Push -->
    <div class="modal fade" id="exportModal" tabindex="-1" role="dialog" aria-labelledby="exportModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exportModalLabel">Export Data</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                </div>
                <div class="modal-body">
                    <h6>Force Push to Cloud</h6>
                    <p class="small text-danger"><strong>Warning:</strong> This will completely overwrite your cloud data with the data from this device. Any changes made on other devices since your last sync will be lost.</p>
                    <button class="btn btn-danger btn-block" id="forcePushTriggerBtn"><i class="fas fa-cloud-upload-alt"></i> Force Push to Cloud</button>
                    <hr>
                    <h6>Export as File</h6>
                    <p class="small text-muted">Download a local backup of your collection in either CSV or JSON format.</p>
                    <div class="d-flex justify-content-around">
                        <button class="btn btn-primary" id="exportCsvBtn"><i class="fas fa-file-csv"></i> Download CSV</button>
                        <button class="btn btn-info" id="exportJsonBtn"><i class="fas fa-file-code"></i> Download JSON</button>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
<!-- END CHUNK: Export / Push -->

<!-- START CHUNK: Confirm Force Pull -->
    <div class="modal fade" id="confirmForcePullModal" tabindex="-1" role="dialog">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header bg-warning text-dark">
                    <h5 class="modal-title">Confirm Force Pull</h5>
                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button>
                </div>
                <div class="modal-body">
                    <p>Are you sure? This will **permanently delete** all local data on this device and replace it with your current cloud backup. This action cannot be undone.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-warning" id="confirmForcePullBtn">Yes, Pull from Cloud</button>
                </div>
            </div>
        </div>
    </div>
<!-- END CHUNK: Confirm Force Pull -->

<!-- START CHUNK: Confirm Force Push -->
    <div class="modal fade" id="confirmForcePushModal" tabindex="-1" role="dialog">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header bg-danger text-white">
                    <h5 class="modal-title">Confirm Force Push</h5>
                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button>
                </div>
                <div class="modal-body">
                    <p><strong>DANGER:</strong> Are you absolutely sure? This will **permanently overwrite** your entire cloud backup with the data currently on this device. Any entries or changes on other devices will be lost forever.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-danger" id="confirmForcePushBtn">Yes, Overwrite Cloud</button>
                </div>
            </div>
        </div>
    </div>
<!-- END CHUNK: Confirm Force Push -->

<!-- START CHUNK: Main App Layout & Top Navigation Bar -->
<div id="appContent" style="display: none;">
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <button class="navbar-toggler mr-2" type="button" data-toggle="offcanvas" data-target="#appMenu" aria-controls="appMenu" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <a id="Brand" class="navbar-brand" href="#">
            <strong id="fthis" class="d-none d-sm-inline-block">KeepMoviEZ</strong>
        </a>

        <div class="ml-auto d-flex align-items-center">
            <form id="navbarSearchForm" class="form-inline my-2 my-lg-0 mr-2">
                <div class="input-group">
                    <input type="text" id="filterInputNavbar" class="form-control form-control-sm" placeholder="Search...">
                    <button id="sortDirectionToggle" class="btn" type="button" title="Toggle Sort Direction">
                        <i class="fas fa-arrow-down"></i>
                    </button>
                </div>
            </form>

            <div class="d-flex align-items-center">
                <div class="dropdown mr-2">
                    <button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button" id="sortColumnDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        N
                    </button>
                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="sortColumnDropdown">
                        <a class="dropdown-item" href="#" data-sort-by="Name">Name</a>
                        <a class="dropdown-item" href="#" data-sort-by="lastModifiedDate">Last Modified</a>
                        <a class="dropdown-item" href="#" data-sort-by="LastWatchedDate">Last Watched</a>
                        <a class="dropdown-item" href="#" data-sort-by="Year">Year</a>
                        <a class="dropdown-item" href="#" data-sort-by="overallRating">Rating</a>
                    </div>
                </div>

                <button id="filterBtn" class="btn btn-sm btn-outline-info" data-toggle="modal" data-target="#filterSortModal" title="Filter Collection">
                    <i class="fas fa-filter"></i>
                </button>
            </div>
        </div>
    </nav>
</div>
<!-- END CHUNK: Main App Layout & Top Navigation Bar -->

<!-- START CHUNK: Main Content Display Area -->
        <div class="container-fluid mt-4">
            <div id="initialMessage" class="initial-upload-section text-center p-4 rounded shadow-sm">
                <h4>Welcome to KeepMoviEZ !</h4>
                <p>Your movie log is currently empty. Add your first entry using the '+' button below, or upload an existing collection using the "CSV/JSON" button in the menu.</p>
                <p class="text-info small mt-3"><strong>Tip:</strong>
                    You can find a demo CSV file here: <a href="https://drive.google.com/file/d/1Q_qiQuJfY030fOUcv2tdezAh4qPUgZPh/view?usp=drivesdk" target="_blank" rel="noopener noreferrer">Demo CSV</a>.
                </p>
            </div>

            <div class="table-responsive" tabindex="0">
                <div id="movieCardContainer" class="card-container">
                    <!-- Movie cards will be dynamically injected here -->
                </div>
            </div>
        </div>
<!-- END CHUNK: Main Content Display Area -->

<!-- START CHUNK: Bottom Navigation & Action Bar -->
        <nav id="bottomNav" class="navbar fixed-bottom-nav center-add-btn">
            <div id="multiSelectActionsBar" class="multi-select-actions-bar" style="display: none;">
                <button id="batchEditSelectedBtn" class="btn btn-info"><i class="fas fa-edit"></i> Edit</button>
                <button id="batchDeleteSelectedBtn" class="btn btn-danger"><i class="fas fa-trash-alt"></i> Delete</button>
                <button id="cancelMultiSelectBtn" class="btn btn-secondary"><i class="fas fa-times"></i> Cancel</button>
                <span id="multiSelectCount" class="text-white ml-2 small">0</span>
            </div>
            <button id="addNewEntryBtn" class="btn btn-primary" data-toggle="modal" data-target="#entryModal"> <i class="fas fa-plus-circle"></i> </button>
        </nav>
    </div> <!-- This closes #appContent -->
<!-- END CHUNK: Bottom Navigation & Action Bar -->

<!-- START CHUNK: Modal - Filter (Previously Filter & Sort) -->
    <div class="modal fade" id="filterSortModal" tabindex="-1" role="dialog" aria-labelledby="filterSortModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content fade-up">
                <div class="modal-header">
                    <h5 class="modal-title" id="filterSortModalLabel">Filter Collection</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"> <span aria-hidden="true">×</span> </button>
                </div>
                <div class="modal-body">
                    <form id="filterSortForm">
                        <!-- REFACTORED: Removed Sort Options as they are now on the main screen -->
                        <div class="filter-modal-section">
                            <h6>Filter Options</h6>
                            <div class="form-row">
                                <div class="form-group col-md-6">
                                    <label for="filterCategory">Category</label>
                                    <select id="filterCategory" class="form-control form-control-sm"></select>
                                </div>
                                <div class="form-group col-md-6">
                                    <label for="filterCountry">Country</label>
                                    <select id="filterCountry" class="form-control form-control-sm"></select>
                                </div>
                            </div>
                             <div class="form-row">
                                <div class="form-group col-md-6">
                                    <label for="filterLanguage">Language</label>
                                    <select id="filterLanguage" class="form-control form-control-sm"></select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="filterGenreSearchInput">Filter by Genres</label>
                                <div class="d-flex justify-content-start align-items-center mb-2">
                                    <small class="mr-2">Match:</small>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="filterGenreLogic" id="filterGenreLogicAnd" value="AND" checked>
                                        <label class="form-check-label small" for="filterGenreLogicAnd">All</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="filterGenreLogic" id="filterGenreLogicOr" value="OR">
                                        <label class="form-check-label small" for="filterGenreLogicOr">Any</label>
                                    </div>
                                </div>
                                <div id="filterGenreContainer" aria-label="Selected genres and add control" tabindex="0">
                                    <input id="filterGenreSearchInput" type="text" placeholder="Click to add genres..." aria-label="Search or add genres to filter by">
                                </div>
                                <div id="filterGenreDropdown">
                                    <div id="filterGenreItemsContainer" class="list-group mt-1"></div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" id="clearFiltersBtn">Clear Filters</button>
                    <button type="button" class="btn btn-primary" id="applyFiltersBtn">Apply</button>
                </div>
            </div>
        </div>
    </div>
<!-- END CHUNK: Modal - Filter -->

<!-- START CHUNK: Modal - Smart Import -->
    <div class="modal fade" id="smartImportModal" tabindex="-1" role="dialog" aria-labelledby="smartImportModalLabel" aria-hidden="true" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content fade-up">
                <div class="modal-header">
                    <h5 class="modal-title" id="smartImportModalLabel">Smart Import Assistant</h5>
                </div>
                <div class="modal-body">
                    <div id="importSummary">
                        <p>Analyzing your file... <i class="fas fa-spinner fa-spin"></i></p>
                    </div>
                    <hr>
                    <h6>Choose Your Import Strategy:</h6>
                    <div class="form-group">
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="importStrategy" id="strategyAppendNew" value="append_new" checked>
                            <label class="form-check-label" for="strategyAppendNew">
                                <strong>Append New Entries Only</strong> (Safest)
                                <small class="d-block text-muted">Only adds titles that are not found in your library. Ignores all potential matches and duplicates.</small>
                            </label>
                        </div>

                        <!-- ## NEWLY ADDED SECTION START ## -->
                        <div class="form-check mt-2">
                            <input class="form-check-input" type="radio" name="importStrategy" id="strategyBackfill" value="backfill_missing">
                            <label class="form-check-label" for="strategyBackfill">
                                <strong>Smart Backfill Missing Data</strong> (Recommended for Recovery)
                                <small class="d-block text-muted">Adds new entries and for existing entries, it ONLY fills in fields that are currently empty (like runtime, related entries etc.). It will not overwrite any existing data.</small>
                            </label>
                        </div>
                        <!-- ## NEWLY ADDED SECTION END ## -->

                        <div class="form-check mt-2">
                            <input class="form-check-input" type="radio" name="importStrategy" id="strategyUpdate" value="update_matches">
                            <label class="form-check-label" for="strategyUpdate">
                                <strong>Append New & Update Matches</strong>
                                <small class="d-block text-muted">Adds new titles and updates existing entries if the imported version is newer (based on `lastModifiedDate`).</small>
                            </label>
                        </div>
                         <div class="form-check mt-2">
                            <input class="form-check-input" type="radio" name="importStrategy" id="strategyOverwrite" value="overwrite_all">
                            <label class="form-check-label" for="strategyOverwrite">
                                <strong>Overwrite All Matches</strong> (Advanced)
                                <small class="d-block text-danger">For every match found, the version from the file will completely replace your existing data for that entry.</small>
                            </label>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal" id="cancelImportBtn">Cancel</button>
                    <button type="button" class="btn btn-primary" id="confirmImportBtn">Process Import</button>
                </div>
            </div>
        </div>
    </div>
<!-- END CHUNK: Modal - Smart Import -->

<!-- REFACTORED CHUNK: Modal - Entry Form (Add/Edit) -->
    <div class="modal fade" id="entryModal" tabindex="-1" role="dialog" aria-labelledby="entryModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content fade-up">
                <div class="modal-header">
                    <h5 class="modal-title" id="entryModalLabel">Add New Entry</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"> <span aria-hidden="true">X</span> </button>
                </div>
                <div class="modal-body">
                    <form id="entryForm" novalidate>
                        <!-- Hidden fields remain at the top for easy access by JS -->
                        <input type="hidden" id="editEntryId"> <input type="hidden" id="posterUrl">
                        <input type="hidden" id="tmdbId"> <input type="hidden" id="tmdbMediaType">
                        <input type="hidden" id="currentWatchHistory" value="[]"> <input type="hidden" id="editingWatchId">

                        <!-- SECTION 1: PRIMARY VISIBLE INFO -->
                        <div class="form-group">
                            <label for="movieName">Name</label>
                            <input type="text" class="form-control" id="movieName" required placeholder="e.g., The Matrix">
                        </div>
                        <div class="form-group">
                            <label>Search TMDB</label>
                            <div class="input-group">
                                <input type="number" class="form-control tmdb-year-input" id="tmdbSearchYear" placeholder="Year (Optional)" min="1888" max="2100">
                                <div class="input-group-append"><button type="button" class="btn btn-info" id="searchTmdbBtn"><i class="fas fa-search"></i> Search & Autofill</button></div>
                            </div>
                        </div>
                        <div id="tmdbSearchResults" class="list-group mb-3" style="max-height: 200px; overflow-y: auto; display: none;"></div>
                        <div class="form-row">
                            <div class="form-group col-md-6"><label for="category">Category</label><select id="category" class="form-control"><option value="Movie">Movie</option><option value="Series">Series</option><option value="Documentary">Documentary</option><option value="Special">Special</option></select></div>
                            <div class="form-group col-md-6"><label for="status">Status</label><select id="status" class="form-control"><option value="To Watch">To Watch</option><option value="Watched">Watched</option><option value="Continue">Continue</option><option value="Unwatched">Unwatched</option></select></div>
                        </div>

                        <!-- SECTION 2: CONDITIONALLY VISIBLE FIELDS (Ratings, Progress, History) -->
                        <div id="seriesContinueGroup" class="form-row" style="display: none;">
                            <div class="form-group col-6"><label for="seasonsCompleted">Seasons Completed</label><input type="number" class="form-control form-control-sm" id="seasonsCompleted" min="0"></div>
                            <div class="form-group col-6"><label for="currentSeasonEpisodesWatched">Episode <small> (this season)</small></label><input type="number" class="form-control form-control-sm" id="currentSeasonEpisodesWatched" placeholder="Current Season" min="0"></div>
                        </div>

                        <div class="form-row">
                            <div class="form-group col-md-6" id="overallRatingGroup" style="display: none;"><label for="overallRating">My Overall Rating</label><select id="overallRating" class="form-control"><option value="">--Select--</option><option value="1">1 Star</option><option value="2">2 Stars</option><option value="3">3 Stars</option><option value="4">4 Stars</option><option value="5">5 Stars</option></select></div>
                            <div class="form-group col-md-6" id="recommendationGroup" style="display: none;"><label for="recommendation">My Recommendation</label><select id="recommendation" class="form-control"><option value="">-Select-</option><option value="Ignore">Ignore</option><option value="Less Recommended">Less Recommended</option><option value="Recommended">Recommended</option><option value="Highly Recommended">Highly Recommended</option></select></div>
                        </div>
                        <div class="form-group" id="personalRecommendationGroup">
                            <label for="personalRecommendation">Watch Preference</label><select id="personalRecommendation" class="form-control"><option value="">--Select--</option><option value="Watch Alone">Watch Alone</option><option value="Safe to share">Safe to Share</option></select>
                        </div>
                        
                        <div id="watchHistorySection" style="display: none;">
                            <hr>
                            <div class="d-flex justify-content-between align-items-center mb-2">
                                <h6>Watch Records</h6>
                                <button type="button" class="btn btn-sm btn-outline-primary" id="toggleAddWatchInstanceFormBtn"><i class="fas fa-plus"></i> Add Record</button>
                            </div>
                            <div id="addWatchInstanceForm" class="p-3 border rounded mb-3" style="display:none;">
                                <h6 id="watchInstanceFormTitle" class="mb-3">Add Watch Record</h6>
                                <div class="form-row">
                                    <div class="form-group col-md-6"><label for="watchDate">Date</label><input type="date" class="form-control" id="watchDate"></div>
                                    <div class="form-group col-md-6"><label for="watchRating">Rating</label><select id="watchRating" class="form-control"><option value="">--Select--</option><option value="1">1 Star</option><option value="2">2 Stars</option><option value="3">3 Stars</option><option value="4">4 Stars</option><option value="5">5 Stars</option></select></div>
                                </div>
                                <div class="form-group"><label for="watchNotes">Notes</label><textarea class="form-control" id="watchNotes" rows="2"></textarea></div>
                                <button type="button" class="btn btn-success btn-sm mr-2" id="saveWatchInstanceBtn">Save</button><button type="button" class="btn btn-secondary btn-sm" id="cancelWatchInstanceBtn">Cancel</button>
                            </div>
                            <div id="watchHistoryList"></div>
                        </div>
                        
                        <!-- SECTION 3: COLLAPSIBLE ADVANCED SECTION (For Edit Mode) -->
                        <div class="accordion entry-form-accordion mt-3" id="advancedSectionAccordion" style="display:none;">
                             <div class="card">
                                <div class="card-header" id="advancedHeading">
                                    <h5 class="mb-0">
                                        <button type="button" class="btn btn-link" data-toggle="collapse" data-target="#advancedCollapse" aria-expanded="true" aria-controls="advancedCollapse">
                                             Advanced Details
                                        </button>
                                    </h5>
                                </div>
                                <div id="advancedCollapse" class="collapse" aria-labelledby="advancedHeading" data-parent="#advancedSectionAccordion">
                                    <div class="card-body">
                                        <!-- All the detailed fields now live inside here -->
                                        <div class="form-group">
                                            <label for="genreSearchInput">Genre</label>
                                            <div id="genreInputContainer" tabindex="0"><input id="genreSearchInput" type="text" placeholder="Click to add genres..."></div>
                                            <div id="genreDropdown"><div id="genreItemsContainer" class="list-group mt-1"></div></div>
                                        </div>
                                        <div class="form-row">
                                            <div class="form-group col-md-4"><label for="year">Year</label><input type="number" class="form-control" id="year" min="1888" max="2100"></div>
                                            <div class="form-group col-md-4"><label for="language">Language</label><input type="text" class="form-control" id="language"></div>
                                            <div class="form-group col-md-4"><label for="country">Country</label><input type="text" class="form-control" id="country" placeholder="e.g., US, IN"></div>
                                        </div>
                                        <div id="runtimeSection">
                                            <div id="movieRuntimeGroup" class="form-group" style="display: none;"><label for="runtimeMovie">Runtime (minutes)</label><input type="number" class="form-control" id="runtimeMovie" min="0"></div>
                                            <div id="seriesRuntimeGroup" class="form-row" style="display: none;">
                                                <div class="form-group col-md-4"><label for="runtimeSeriesSeasons">Total Seasons</label><input type="number" class="form-control" id="runtimeSeriesSeasons" min="0"></div>
                                                <div class="form-group col-md-4"><label for="runtimeSeriesEpisodes">Total Episodes</label><input type="number" class="form-control" id="runtimeSeriesEpisodes" min="0"></div>
                                                <div class="form-group col-md-4"><label for="runtimeSeriesAvgEp">Avg. Ep. (min)</label><input type="number" class="form-control" id="runtimeSeriesAvgEp" min="0"></div>
                                            </div>
                                        </div>
                                        <div class="form-group"><label for="description">Description</label><textarea class="form-control" id="description" rows="3"></textarea></div>
                                        <div class="form-group">
                                            <label for="relatedEntriesNames">Link to Other Entries in Your Log</label>
                                            <input type="text" class="form-control" id="relatedEntriesNames" placeholder="Start typing a title...">
                                            <div id="relatedEntriesSuggestions" class="list-group mt-1" style="display: none; max-height: 150px; overflow-y: auto;"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>

                    <!-- NEW: Save buttons for "Add Mode" -->
                    <div id="addModeButtons" class="btn-group">
                        <button type="submit" form="entryForm" class="btn btn-primary" id="quickSaveBtn">Quick Save</button>
                        <button type="button" class="btn btn-primary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <span class="sr-only">Toggle Dropdown</span>
                        </button>
                        <div class="dropdown-menu dropdown-menu-right">
                            <a class="dropdown-item" href="#" id="saveAndAddAnotherBtn">Save & Add Another</a>
                            <a class="dropdown-item" href="#" id="saveAndEditBtn">Save & Edit Details</a>
                        </div>
                    </div>
                    
                    <!-- NEW: Save button for "Edit Mode" -->
                    <button type="submit" form="entryForm" class="btn btn-primary" id="updateEntryBtn" style="display:none;"><i class="fas fa-save"></i> Update Entry</button>
                </div>
            </div>
        </div>
    </div>
<!-- END REFACTORED CHUNK: Modal - Entry Form (Add/Edit) -->

<!-- NEW CHUNK: Modal - Quick Update -->
    <div class="modal fade" id="quickUpdateModal" tabindex="-1" role="dialog" aria-labelledby="quickUpdateModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="quickUpdateModalLabel">Update Progress</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                </div>
                <div class="modal-body">
                    <form id="quickUpdateForm">
                        <input type="hidden" id="quickUpdateEntryId">

                        <!-- For Series: "Finished?" Toggle -->
                        <div class="form-group custom-control custom-switch" id="quickUpdateFinishedToggleWrapper" style="display:none;">
                            <input type="checkbox" class="custom-control-input" id="quickUpdateFinishedToggle">
                            <label class="custom-control-label" for="quickUpdateFinishedToggle">Finished the series?</label>
                        </div>
                        
                        <!-- For Series: Progress Fields -->
                        <div id="quickUpdateSeriesProgress" class="form-row" style="display:none;">
                            <div class="form-group col-6"><label for="quickUpdateSeasons">Seasons Completed</label><input type="number" class="form-control form-control-sm" id="quickUpdateSeasons" min="0"></div>
                            <div class="form-group col-6"><label for="quickUpdateEpisodes">Episode<small> (this season)</small></label><input type="number" class="form-control form-control-sm" id="quickUpdateEpisodes" placeholder="Current Season" min="0"></div>
                        </div>

                        <!-- For All: Watch Record Fields -->
                        <div class="form-group">
                            <label for="quickUpdateDate">Watch Date</label>
                            <input type="date" class="form-control" id="quickUpdateDate" required>
                        </div>
                        <div class="form-group">
                            <label for="quickUpdateRating">Rating (for this session)</label>
                            <select id="quickUpdateRating" class="form-control"><option value="">--Select--</option><option value="1">1 Star</option><option value="2">2 Stars</option><option value="3">3 Stars</option><option value="4">4 Stars</option><option value="5">5 Stars</option></select>
                        </div>

                        <!-- Conditional Fields -->
                        <div id="quickUpdateConditionalFields" style="display:none;">
                             <div class="form-group">
                                <label for="quickUpdateOverallRating">My Overall Rating (for the whole series)</label>
                                <select id="quickUpdateOverallRating" class="form-control"><option value="">--Select--</option><option value="1">1 Star</option><option value="2">2 Stars</option><option value="3">3 Stars</option><option value="4">4 Stars</option><option value="5">5 Stars</option></select>
                            </div>
                            <div class="form-group">
                                <label for="quickUpdateRecommendation">My Recommendation</label>
                                <select id="quickUpdateRecommendation" class="form-control"><option value="">-Select-</option><option value="Ignore">Ignore</option><option value="Less Recommended">Less Recommended</option><option value="Recommended">Recommended</option><option value="Highly Recommended">Highly Recommended</option></select>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="quickUpdateNotes">Notes</label>
                            <textarea class="form-control" id="quickUpdateNotes" rows="2"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <button type="submit" form="quickUpdateForm" class="btn btn-primary">Save Progress</button>
                </div>
            </div>
        </div>
    </div>
<!-- END NEW CHUNK: Modal - Quick Update -->

<!-- START CHUNK: Modal - Details View -->
<div class="modal fade" id="detailsModal" tabindex="-1" role="dialog" aria-labelledby="detailsModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-xl" role="document">
        <div class="modal-content details-modal-content">
            <button type="button" class="close details-modal-close-btn" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
            <div class="modal-body p-0">
                <div class="details-modal-container">
                    <!-- LEFT/TOP: POSTER PANEL (Cleaned) -->
                    <div class="details-poster-panel">
                        <img id="detailsPoster" class="details-poster-img" alt="Poster">
                        <div id="noPosterMessage" class="no-poster-message">No Poster Available</div>
                    </div>

                    <!-- RIGHT/BOTTOM: INFO PANEL -->
                    <div class="details-info-panel">
                        <div class="details-info-scroll-container">
                            <!-- Header Info (Moved Here) -->
                            <h3 id="detailsName" class="details-title"></h3>
                            <p id="detailsMeta" class="details-meta-line">
                                <span id="detailsYear"></span> &bull; <span id="detailsLanguage"></span> &bull; <span id="detailsCountry"></span> &bull; <span id="detailsRuntime"></span>
                            </p>
                            <div class="details-genre-container-wrapper">
                                <div id="detailsGenre" class="details-genre-container"></div>
                            </div>
                            
                            <!-- Primary Actions -->
                            <div class="details-actions-container">
                                <a id="detailsTrailerBtn" class="btn details-action-btn youtube" target="_blank" rel="noopener noreferrer"><i class="fab fa-youtube"></i> Trailer</a>
                                <a id="detailsStreamingBtn" class="btn details-action-btn stream" target="_blank" rel="noopener noreferrer"><i class="fas fa-play-circle"></i> Watch Here</a>
                            
                                <!-- Parents Guide Component -->
                                <div id="detailsParentalGuideSection" style="display:none;">
                                    <!-- Movie Version -->
                                    <a id="imdbParentalGuideBtnMovie" class="btn details-action-btn parental-blue" target="_blank" rel="noopener noreferrer" style="display:none;">
                                        <i class="fas fa-book-open"></i> Parents Guide
                                    </a>
                                    <!-- Series Version -->
                                    <div id="imdbParentalGuideBtnSeries" class="details-action-group parental-blue" style="display:none;">
                                        <div class="input-group-series-guide">
                                            <button class="btn btn-sm btn-pg-stepper" type="button" data-target="pgSeasonInput" data-step="-1">&minus;</button>
                                            <input type="number" class="form-control form-control-sm pg-input" id="pgSeasonInput" value="1" min="1" placeholder="S">
                                            <button class="btn btn-sm btn-pg-stepper" type="button" data-target="pgSeasonInput" data-step="1">&plus;</button>
                                        </div>
                                        <div class="input-group-series-guide">
                                            <button class="btn btn-sm btn-pg-stepper" type="button" data-target="pgEpisodeInput" data-step="-1">&minus;</button>
                                            <input type="number" class="form-control form-control-sm pg-input" id="pgEpisodeInput" value="0" min="0" placeholder="E">
                                            <button class="btn btn-sm btn-pg-stepper" type="button" data-target="pgEpisodeInput" data-step="1">&plus;</button>
                                        </div>
                                        <a id="imdbEpisodeParentalGuideBtn" class="pg-book-icon" href="#" target="_blank" rel="noopener noreferrer" title="View Parents Guide">
                                            <i class="fas fa-book-open"></i>
                                        </a>
                                    </div>
                                </div>
                            </div>

                            <!-- My Ratings -->
                            <div class="details-my-ratings-section">
                                <div id="detailsRecommendationGroup" style="display:none;">
                                    <strong>My Recommendation:</strong> <span id="detailsRecommendation"></span>
                                </div>
                                <div id="detailsOverallRatingGroup" style="display:none;">
                                    <strong>My Overall Rating:</strong> <span id="detailsOverallRating"></span>
                                </div>
                                 <div id="detailsPersonalRecommendationGroup" style="display:none;">
                                    <strong>Watch Preference:</strong> <span id="detailsPersonalRecommendation"></span>
                                </div>
                            </div>

                            <!-- NEW: Continue Progress Section -->
                            <div id="detailsContinueGroup" class="details-progress-section" style="display:none;">
                                <h6>My Progress</h6>
                                <p id="detailsContinueText" class="mb-0"></p>
                            </div>

                            <!-- Accordion Sections -->
                            <div class="accordion details-accordion" id="detailsAccordion">
                                <!-- Description -->
                                <div class="card">
                                    <div class="card-header" id="headingDesc">
                                        <h6 class="mb-0">
                                            <button class="btn btn-link btn-block text-left collapsed" type="button" data-toggle="collapse" data-target="#collapseDesc" aria-expanded="false" aria-controls="collapseDesc">
                                                Description
                                            </button>
                                        </h6>
                                    </div>
                                    <div id="collapseDesc" class="collapse" aria-labelledby="headingDesc" data-parent="#detailsAccordion">
                                        <div class="card-body" id="detailsDescription"></div>
                                    </div>
                                </div>
                                <!-- Keywords -->
                                <div class="card" id="detailsKeywordsContainer">
                                    <div class="card-header" id="headingKeywords">
                                        <h6 class="mb-0">
                                            <button class="btn btn-link btn-block text-left collapsed" type="button" data-toggle="collapse" data-target="#collapseKeywords" aria-expanded="false" aria-controls="collapseKeywords">
                                                Keywords
                                            </button>
                                        </h6>
                                    </div>
                                    <div id="collapseKeywords" class="collapse" aria-labelledby="headingKeywords" data-parent="#detailsAccordion">
                                        <div class="card-body" id="detailsKeywords"></div>
                                    </div>
                                </div>
                                <!-- Related Entries -->
                                <div class="card" id="detailsRelatedLinksSectionToggle">
                                    <div class="card-header" id="headingRelated">
                                        <h6 class="mb-0">
                                            <button class="btn btn-link btn-block text-left collapsed" type="button" data-toggle="collapse" data-target="#collapseRelated" aria-expanded="false" aria-controls="collapseRelated">
                                                Related Entries
                                            </button>
                                        </h6>
                                    </div>
                                    <div id="collapseRelated" class="collapse" aria-labelledby="headingRelated" data-parent="#detailsAccordion">
                                        <div class="card-body" id="detailsRelatedLinksContent"></div>
                                    </div>
                                </div>
                                <!-- Cast & Crew -->
                                <div class="card" id="detailsCastCrewSectionToggle">
                                    <div class="card-header" id="headingCast">
                                        <h6 class="mb-0">
                                            <button class="btn btn-link btn-block text-left collapsed" type="button" data-toggle="collapse" data-target="#collapseCast" aria-expanded="false" aria-controls="collapseCast">
                                                Cast & Crew
                                            </button>
                                        </h6>
                                    </div>
                                    <div id="collapseCast" class="collapse" aria-labelledby="headingCast" data-parent="#detailsAccordion">
                                        <div class="card-body" id="detailsCastCrewContent"></div>
                                    </div>
                                </div>
                            </div>

                            <!-- Watch History -->
                            <div id="detailsWatchHistorySection" class="details-watch-history-section" style="display:none;">
                                <h6>Watch History</h6>
                                <ul id="detailsWatchHistoryList" class="list-unstyled"></ul>
                            </div>
                            
                            <small id="detailsLastModified" class="text-muted d-block mt-4 text-center"></small>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer details-modal-footer">
                <button type="button" class="btn btn-primary" id="detailsModalAddBtn" style="display:none;"><i class="fas fa-plus-circle"></i> Add</button>
                <button type="button" class="btn btn-info" id="findSimilarBtn" style="display:none;"><i class="fas fa-magic"></i> Similar</button>
                <button type="button" class="btn btn-success" id="downloadDetailsImageBtn"><i class="fas fa-download"></i> Share</button>
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<!-- END CHUNK: Modal - Details View -->

<!-- START CHUNK: Modal - Person Details -->
    <div class="modal fade" id="personDetailsModal" tabindex="-1" role="dialog" aria-labelledby="personDetailsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content fade-up">
                <div class="modal-header">
                    <h5 class="modal-title" id="personDetailsModalLabel"></h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"> <span aria-hidden="true">×</span> </button>
                </div>
                <div class="modal-body text-center">
                    <img id="personProfileImage" alt="Person Profile" class="person-profile-img img-fluid d-none">
                    <p id="noPersonImageMessage" class="text-muted small mt-2">No Image Available</p>
                    <p id="personBio" class="mt-3 text-left small"></p>

                    <hr>
                    <h5>Filmography in Your Log</h5>
                    <ul id="personFilmographyList" class="list-unstyled text-left"></ul>
                </div>
                <div class="modal-footer">
                     <button type="button" class="btn btn-info" id="viewTmdbPersonBtn" target="_blank" rel="noopener noreferrer" style="display:none;"><i class="fas fa-external-link-alt"></i> View on TMDB</button>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
<!-- END CHUNK: Modal - Person Details -->

<!-- START CHUNK: Modal - Detailed Statistics -->
    <div class="modal fade" id="detailedStatsModal" tabindex="-1" role="dialog" aria-labelledby="detailedStatsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl" role="document">
            <div class="modal-content fade-up">
                <div class="modal-header">
                    <h5 class="modal-title" id="detailedStatsModalLabel">Detailed Statistics</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"> <span aria-hidden="true">×</span> </button>
                </div>
                <div class="modal-body" style="max-height: 80vh; overflow-y: auto;">
                    <ul class="nav nav-tabs mb-3" id="detailedStatsTab" role="tablist">
                        <li class="nav-item"> <a class="nav-link active" id="summary-detailed-tab" data-toggle="tab" href="#stats-summary-detailed" role="tab" aria-controls="stats-summary-detailed" aria-selected="true">Summary</a> </li>
                        <li class="nav-item"> <a class="nav-link" id="progress-detailed-tab" data-toggle="tab" href="#stats-progress-detailed" role="tab" aria-controls="stats-progress-detailed" aria-selected="false">Progress</a> </li>
                        <li class="nav-item"> <a class="nav-link" id="temporal-detailed-tab" data-toggle="tab" href="#stats-temporal-detailed" role="tab" aria-controls="stats-temporal-detailed" aria-selected="false">Time Analysis</a> </li>
                        <li class="nav-item"> <a class="nav-link" id="genre-deep-dive-detailed-tab" data-toggle="tab" href="#stats-genre-deep-dive-detailed" role="tab" aria-controls="stats-genre-deep-dive-detailed" aria-selected="false">Genre Deep Dive</a> </li>
                        <li class="nav-item"> <a class="nav-link" id="ratings-deep-dive-detailed-tab" data-toggle="tab" href="#stats-ratings-deep-dive-detailed" role="tab" aria-controls="stats-ratings-deep-dive-detailed" aria-selected="false">Rating Insights</a> </li>
                        <li class="nav-item"> <a class="nav-link" id="people-production-detailed-tab" data-toggle="tab" href="#stats-people-production-detailed" role="tab" aria-controls="stats-people-production-detailed" aria-selected="false">People & Production</a> </li>
                        <li class="nav-item"> <a class="nav-link" id="geo-lang-detailed-tab" data-toggle="tab" href="#stats-geo-lang-detailed" role="tab" aria-controls="stats-geo-lang-detailed" aria-selected="false">Country & Language</a> </li>
                    </ul>
                    <div class="tab-content" id="detailedStatsTabContent">
                        <div class="tab-pane fade show active" id="stats-summary-detailed" role="tabpanel" aria-labelledby="summary-detailed-tab">
                            <div class="row">
                                <div class="col-md-6 stats-section">
                                    <h6>Overall Summary</h6>
                                    <p><strong>Total Entries:</strong> <span id="statsTotalEntries">0</span></p>
                                    <p><strong>Total Titles Watched:</strong> <span id="statsTotalTitlesWatched">0</span></p>
                                    <p><strong>Total Watch Instances:</strong> <span id="statsTotalWatchInstances">0</span></p>
                                    <p><strong>Total Watch Time (Est.):</strong> <span id="statsTotalWatchTime">N/A</span></p>
                                    <p><strong>Average Overall Rating: </strong> <span id="statsAvgOverallRating">N/A</span></p>
                                </div>
                                <div class="col-md-6 stats-section">
                                    <h6>Entries by Category</h6>
                                    <ul id="statsByCategory" class="list-group list-group-flush"></ul>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 stats-section">
                                    <h6>Entries by Status</h6>
                                    <ul id="statsByStatus" class="list-group list-group-flush"></ul>
                                </div>
                                <div class="col-md-6 stats-section">
                                    <h6>Top 5 Rated Genres (Overall)</h6>
                                    <ol id="statsTopRatedGenresOverall" class="list-group list-group-flush"></ol>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="stats-progress-detailed" role="tabpanel" aria-labelledby="progress-detailed-tab">
                             <div class="stats-section">
                                <h6>Your Watchlist Progress</h6>
                                <p><strong>"To Watch" List Progress:</strong> <span id="statsToWatchCompletion">0%</span></p>
                                <div class="progress">
                                    <div id="toWatchProgressBar" class="progress-bar" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                                <p class="mt-2"><strong>Watched:</strong> <span id="watchedCountProgress">0</span> / <span id="totalRelevantCountProgress">0</span></p>
                                <hr>
                                <h6>Pace & Predictions</h6>
                                <p><strong>Estimated time to finish 'To Watch' list:</strong> <span id="estimatedCompletionTime">N/A</span></p>
                                <p><strong>Completion Prediction (30-day pace):</strong> <span id="completionPrediction30">N/A</span></p>
                                <p><strong>Completion Prediction (90-day pace):</strong> <span id="completionPrediction90">N/A</span></p>
                                <p><strong>Completion Prediction (365-day pace):</strong> <span id="completionPrediction365">N/A</span></p>
                                <hr>
                                <h6>Watchlist Growth (Last 30 Days)</h6>
                                <p><strong>Net Change:</strong> <span id="watchlistGrowth30">N/A</span></p>
                                <div class="stats-chart-container" style="height: 250px;">
                                    <canvas id="chartWatchlistGrowth"></canvas>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="stats-temporal-detailed" role="tabpanel" aria-labelledby="temporal-detailed-tab">
                            <div class="stats-section">
                                <h6>Watch Activity by Year</h6>
                                <p class="small text-muted">Based on individual watch instance dates.</p>
                                <div id="statsWatchesByYear" class="table-responsive" style="max-height: 300px;">
                                    <table class="table table-sm table-bordered">
                                        <thead><tr><th>Year</th><th>Watch Instances</th><th>Unique Titles Watched</th><th>Avg. Rating This Year</th></tr></thead>
                                        <tbody></tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="stats-section mt-4">
                                <h6>Recent Monthly Watch Activity</h6>
                                <p class="small text-muted">Based on individual watch instance dates.</p>
                                <div id="statsWatchesByMonth" class="table-responsive" style="max-height: 300px;">
                                    <table class="table table-sm table-bordered">
                                        <thead><tr><th>Month</th><th>Watch Instances</th><th>Unique Titles Watched</th></tr></thead>
                                        <tbody></tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="stats-genre-deep-dive-detailed" role="tabpanel" aria-labelledby="genre-deep-dive-detailed-tab">
                            <div class="row">
                                <div class="col-md-6 stats-section"><h6>Most Frequent Single Genres</h6><ol id="statsTopSingleGenres" class="list-group list-group-flush" style="max-height: 250px; overflow-y:auto;"></ol></div>
                                <div class="col-md-6 stats-section"><h6>Top 10 Average Rated Genres</h6><ol id="statsAvgRatingByGenre" class="list-group list-group-flush" style="max-height: 250px; overflow-y:auto;"></ol></div>
                            </div>
                            <div class="stats-section mt-3"><h6>Most Frequent Genre Combinations</h6><p class="small text-muted">Considers exact combinations.</p><ol id="statsGenreCombinations" class="list-group list-group-flush"></ol></div>
                        </div>
                        <div class="tab-pane fade" id="stats-ratings-deep-dive-detailed" role="tabpanel" aria-labelledby="ratings-deep-dive-detailed-tab">
                            <div class="row">
                                <div class="col-md-6 stats-section"><h6>Distribution of Overall Entry Ratings</h6><ul id="statsByOverallRating" class="list-group list-group-flush"></ul></div>
                                <div class="col-md-6 stats-section"><h6>Distribution of Individual Watch Ratings</h6><ul id="statsByWatchInstanceRating" class="list-group list-group-flush"></ul></div>
                            </div>
                            <div class="stats-section mt-3"><h6>Average Overall Rating by Category</h6><ul id="statsAvgOverallRatingByCategory" class="list-group list-group-flush"></ul></div>
                        </div>
                        <div class="tab-pane fade" id="stats-people-production-detailed" role="tabpanel" aria-labelledby="people-production-detailed-tab">
                            <div class="row">
                                <div class="col-md-6 stats-section">
                                    <h6>Most Watched Actors (Top 10)</h6>
                                    <ol id="statsMostWatchedActors" class="list-group list-group-flush" style="max-height: 300px; overflow-y:auto;"></ol>
                                </div>
                                <div class="col-md-6 stats-section">
                                    <h6>Most Watched Directors (Top 10)</h6>
                                    <ol id="statsMostWatchedDirectors" class="list-group list-group-flush" style="max-height: 300px; overflow-y:auto;"></ol>
                                </div>
                            </div>
                             <div class="stats-section mt-3">
                                <h6>Most Frequent Production Companies (Top 10)</h6>
                                <ol id="statsMostFrequentProductionCompanies" class="list-group list-group-flush" style="max-height: 300px; overflow-y:auto;"></ol>
                            </div>
                            <div class="stats-section mt-3"><h6>Average Overall Rating by Studio (Top 5)</h6><ul id="statsAvgRatingByStudio" class="list-group list-group-flush"></ul></div>
                        </div>
                        <div class="tab-pane fade" id="stats-geo-lang-detailed" role="tabpanel" aria-labelledby="geo-lang-detailed-tab">
                            <div class="row">
                                <div class="col-md-6 stats-section"><h6>Top Countries of Origin</h6><ol id="statsTopCountries" class="list-group list-group-flush" style="max-height: 250px; overflow-y:auto;"></ol></div>
                                <div class="col-md-6 stats-section"><h6>Top Original Languages</h6><ol id="statsTopLanguages" class="list-group list-group-flush" style="max-height: 250px; overflow-y:auto;"></ol></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer justify-content-between">
                  <div class="custom-control custom-switch">
                        <input type="checkbox" class="custom-control-input" id="timeFormatToggle">
                     <label class="custom-control-label small" for="timeFormatToggle"></label>
                    </div>
                    <div>
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary" id="exportStatsPdfBtn"><i class="fas fa-file-pdf"></i> Export as PDF</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
<!-- END CHUNK: Modal - Detailed Statistics -->

<!-- START CHUNK: Modal - Daily Recommendation -->
    <div class="modal fade" id="dailyRecommendationModal" tabindex="-1" role="dialog" aria-labelledby="dailyRecommendationModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content fade-up">
                <div class="modal-header">
                    <h5 class="modal-title" id="dailyRecommendationModalLabel">Daily Recommendation</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"> <span aria-hidden="true">×</span> </button>
                </div>
                <div class="modal-body" id="dailyRecommendationModalBody">
                    <p class="text-center text-muted p-3">Loading daily recommendation...</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
<!-- END CHUNK: Modal - Daily Recommendation -->

<!-- START CHUNK: Modal - Personalized Suggestions -->
    <div class="modal fade" id="personalizedSuggestionsModal" tabindex="-1" role="dialog" aria-labelledby="personalizedSuggestionsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content fade-up">
                <div class="modal-header">
                    <h5 class="modal-title" id="personalizedSuggestionsModalLabel">Engine Suggestions</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"> <span aria-hidden="true">×</span> </button>
                </div>
                <div class="modal-body" id="personalizedSuggestionsModalBody">
                     <div class="d-flex justify-content-between align-items-center mb-2">
                        <h6 id="recommendationsListTitleModal">Your Suggestions</h6>
                        <button id="refreshRecommendationsBtnModal" class="btn btn-sm btn-outline-primary">
                            <i class="fas fa-sync-alt"></i> Refresh
                        </button>
                    </div>
                    <p class="text-muted small">Based on your data and preferences.</p>
                    <div id="recommendationsListModal" class="list-group">
                        <p class="text-center text-muted p-3">Loading suggestions...</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
<!-- END CHUNK: Modal - Personalized Suggestions -->

<!-- START CHUNK: Modal - Achievements -->
    <div class="modal fade" id="achievementsModal" tabindex="-1" role="dialog" aria-labelledby="achievementsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl" role="document">
            <div class="modal-content fade-up">
                <div class="modal-header">
                    <h5 class="modal-title" id="achievementsModalLabel">Achievements</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"> <span aria-hidden="true">×</span> </button>
                </div>
                <div class="modal-body" id="achievementsModalBody" style="max-height: 70vh; overflow-y: auto;">
                    <div id="achievementBadgesModal" class="d-flex flex-wrap justify-content-center">
                        <p class="text-center text-muted p-3">Loading achievements...</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
<!-- END CHUNK: Modal - Achievements -->

<!-- START CHUNK: Modal - Visual Data (Charts) -->
    <div class="modal fade" id="chartsModal" tabindex="-1" role="dialog" aria-labelledby="chartsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl" role="document">
            <div class="modal-content fade-up">
                <div class="modal-header">
                    <h5 class="modal-title" id="chartsModalLabel">Visual Data</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"> <span aria-hidden="true">×</span> </button>
                </div>
                <div class="modal-body row" id="chartsModalBody" style="max-height: 80vh; overflow-y: auto;">
                    <div class="col-md-6 stats-chart-container"><h6>Watch Instances by Year</h6><canvas id="chartModalWatchInstancesByYear"></canvas></div>
                    <div class="col-lg-12 stats-chart-container"><h6>Pace Comparison (30, 90, 365 Days)</h6><canvas id="chartNormalizedPace"></canvas></div>
                    <div class="col-md-6 stats-chart-container"><h6>Entries Watched per Genre</h6><canvas id="chartModalMoviesPerGenre"></canvas></div>
                    <div class="col-md-6 stats-chart-container"><h6>Overall Entry Rating Distribution</h6><canvas id="chartModalOverallRatingDistribution"></canvas></div>
                    <div class="col-md-6 stats-chart-container"><h6>Individual Watch Rating Distribution</h6><canvas id="chartModalWatchInstanceRatingDistribution"></canvas></div>
                    <div class="col-md-6 stats-chart-container"><h6>Entry Status Breakdown</h6><canvas id="chartModalMovieStatusBreakdown"></canvas></div>
                    <div class="col-md-6 stats-chart-container"><h6>Language Distribution</h6><canvas id="chartModalLanguageDistribution"></canvas></div>
                    <div class="col-md-6 stats-chart-container"><h6>Top 10 Country Distributions</h6><canvas id="chartModalCountryDistribution"></canvas></div>
                    <div class="col-md-6 stats-chart-container"><h6>Monthly Watch Activity</h6><canvas id="chartModalWatchActivityOverTime"></canvas></div>
                   <!-- <div class="col-md-6 stats-chart-container"><h6>Monthly Average Rating</h6><canvas id="chartModalAvgRatingOverTime"></canvas></div> -->
                    <div class="col-md-6 stats-chart-container"><h6>Average Overall Rating by Genre</h6><canvas id="chartModalRatingByGenreRadar"></canvas></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
<!-- END CHUNK: Modal - Visual Data (Charts) -->

<!-- START CHUNK: Modal - Confirm Delete -->
    <div class="modal fade" id="confirmDeleteModal" tabindex="-1" role="dialog" aria-labelledby="confirmDeleteModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-md" role="document">
        <div class="modal-content fade-up">
          <div class="modal-header bg-danger text-white">
            <h5 class="modal-title" id="confirmDeleteModalLabel">Confirm Deletion</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"> <span aria-hidden="true">×</span> </button>
          </div>
          <div class="modal-body">
            <p id="deleteModalMessage">Are you sure you want to permanently delete this entry? This action cannot be undone.</p>
            <div id="batchDeleteOptions" style="display:none;">
                <p>Delete selected entries from:</p>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="deleteScope" id="deleteLocalOnly" value="local" checked>
                    <label class="form-check-label" for="deleteLocalOnly">Local Cache Only</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="deleteScope" id="deleteCloudOnly" value="cloud">
                    <label class="form-check-label" for="deleteCloudOnly">Cloud Only</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="deleteScope" id="deleteBoth" value="both">
                    <label class="form-check-label" for="deleteBoth">Both Local and Cloud</label>
                </div>
            </div>
          </div>
          <div class="modal-footer"> <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button> <button type="button" class="btn btn-danger" id="confirmDeleteBtn">Delete</button> </div>
        </div>
      </div>
    </div>
<!-- END CHUNK: Modal - Confirm Delete -->

<!-- START CHUNK: Modal - Confirm Duplicate Name -->
    <div class="modal fade" id="duplicateNameConfirmModal" tabindex="-1" role="dialog" aria-labelledby="duplicateNameConfirmModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content fade-up">
          <div class="modal-header bg-warning text-dark">
            <h5 class="modal-title" id="duplicateNameConfirmModalLabel">Duplicate Name Detected</h5>
            <button type="button" class="close text-dark" data-dismiss="modal" aria-label="Close"> <span aria-hidden="true">×</span> </button>
          </div>
          <div class="modal-body"> An entry with this name already exists. Do you want to save this new/edited entry with the same name?</div>
          <div class="modal-footer"> <button type="button" class="btn btn-secondary" id="cancelDuplicateSaveBtn" data-dismiss="modal">Cancel</button> <button type="button" class="btn btn-primary" id="confirmDuplicateSaveBtn">Save Anyway</button> </div>
        </div>
      </div>
    </div>
<!-- END CHUNK: Modal - Confirm Duplicate Name -->

<!-- START CHUNK: Modal - Confirm Erase Data -->
    <div class="modal fade" id="confirmEraseDataModal" tabindex="-1" role="dialog" aria-labelledby="confirmEraseDataModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-md" role="document"> 
            <div class="modal-content fade-up">
                <div class="modal-header bg-danger text-white">
                    <h5 class="modal-title" id="confirmEraseDataModalLabel">Confirm Erase Data</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
                </div>
                <div class="modal-body">
                    <p><strong>Warning:</strong> This action cannot be undone for the selected scope.</p>
                    <div class="form-group">
                        <label for="eraseDataScope">Choose what to erase:</label>
                        <select class="form-control" id="eraseDataScope">
                            <option value="local">Erase Local Device Cache Only</option>
                            <option value="cloud">Erase Cloud Account Data Only</option>
                            <option value="both">Erase From Both Local Cache and Cloud Account</option>
                        </select>
                    </div>
                    <p id="eraseScopeWarning" class="text-danger small"></p>
                    <p>Are you absolutely sure you want to proceed?</p>
                </div>
                <div class="modal-footer justify-content-between">
                    <button type="button" class="btn btn-secondary" id="checkRepairDataBtn"><i class="fas fa-tools"></i> Check & Repair Data</button>
                    <div>
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                        <button type="button" class="btn btn-danger" id="confirmEraseDataBtn">Erase Selected Data</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
<!-- END CHUNK: Modal - Confirm Erase Data -->

<!-- START CHUNK: Modal - Batch Edit -->
    <div class="modal fade" id="batchEditModal" tabindex="-1" role="dialog" aria-labelledby="batchEditModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content fade-up">
                <div class="modal-header">
                    <h5 class="modal-title" id="batchEditModalLabel">Batch Edit Selected Entries</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
                </div>
                <div class="modal-body">
                    <form id="batchEditForm">
                        <p>Apply changes to <strong id="batchEditCount">0</strong> selected entries. <span class="text-info">Only checked fields will be updated.</span></p>

                        <div class="form-group form-row align-items-center">
                            <div class="col-1"><input type="checkbox" id="batchEditApply_Status"></div>
                            <label for="batchEditStatus" class="col-3 col-form-label">Status</label>
                            <div class="col-8">
                                <select id="batchEditStatus" class="form-control form-control-sm">
                                    <option value="To Watch">To Watch</option>
                                    <option value="Watched">Watched</option>
                                    <option value="Continue">Continue</option>
                                    <option value="Unwatched">Unwatched</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group form-row align-items-center">
                            <div class="col-1"><input type="checkbox" id="batchEditApply_Category"></div>
                            <label for="batchEditCategory" class="col-3 col-form-label">Category</label>
                            <div class="col-8">
                                <select id="batchEditCategory" class="form-control form-control-sm">
                                    <option value="Movie">Movie</option>
                                    <option value="Series">Series</option>
                                    <option value="Documentary">Documentary</option>
                                    <option value="Special">Special</option>
                                </select>
                            </div>
                        </div>

                        <hr>
                        <h6>Genre Actions</h6>
                        <div class="form-group form-row align-items-center">
                            <div class="col-1"><input type="checkbox" id="batchEditApply_AddGenre"></div>
                            <label for="batchEditAddGenre" class="col-3 col-form-label">Add Genre</label>
                            <div class="col-8">
                                <input type="text" class="form-control form-control-sm" id="batchEditAddGenre" placeholder="e.g. Comedy">
                            </div>
                        </div>
                        <div class="form-group form-row align-items-center">
                            <div class="col-1"><input type="checkbox" id="batchEditApply_RemoveGenre"></div>
                            <label for="batchEditRemoveGenre" class="col-3 col-form-label">Remove Genre</label>
                            <div class="col-8">
                                <input type="text" class="form-control form-control-sm" id="batchEditRemoveGenre" placeholder="e.g. Action">
                            </div>
                        </div>
                        <hr>

                        <div class="form-group form-row align-items-center">
                            <div class="col-1"><input type="checkbox" id="batchEditApply_OverallRating"></div>
                            <label for="batchEditOverallRating" class="col-3 col-form-label">Overall Rating</label>
                            <div class="col-8">
                                <select id="batchEditOverallRating" class="form-control form-control-sm">
                                    <option value="">-- No Rating --</option>
                                    <option value="1">1 Star</option>
                                    <option value="2">2 Stars</option>
                                    <option value="3">3 Stars</option>
                                    <option value="4">4 Stars</option>
                                    <option value="5">5 Stars</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group form-row align-items-center">
                            <div class="col-1"><input type="checkbox" id="batchEditApply_Recommendation"></div>
                            <label for="batchEditRecommendation" class="col-3 col-form-label">My Recommendation</label>
                            <div class="col-8">
                                 <select id="batchEditRecommendation" class="form-control form-control-sm">
                                    <option value="">- No Change -</option>
                                    <option value="Ignore">Ignore</option>
                                    <option value="Less Recommended">Less Recommended</option>
                                    <option value="Recommended">Recommended</option>
                                    <option value="Highly Recommended">Highly Recommended</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group form-row align-items-center">
                            <div class="col-1"><input type="checkbox" id="batchEditApply_PersonalRecommendation"></div>
                            <label for="batchEditPersonalRecommendation" class="col-3 col-form-label">Watch Preference</label>
                            <div class="col-8">
                               <select id="batchEditPersonalRecommendation" class="form-control form-control-sm">
                                    <option value="">- No Change -</option>
                                    <option value="Watch Alone">watch alone</option>
                                    <option value="Safe to share">Safe to share</option>
                                </select>
                            </div>
                        </div>

                        <hr>
                        <div class="form-group form-row align-items-center">
                            <div class="col-1"><input type="checkbox" id="batchEditApply_Year"></div>
                            <label for="batchEditYear" class="col-3 col-form-label">Year of Release</label>
                            <div class="col-8">
                                <input type="number" class="form-control form-control-sm" id="batchEditYear" min="1888" max="2100" placeholder="e.g. 2023">
                            </div>
                        </div>
                        <div class="form-group form-row align-items-center">
                            <div class="col-1"><input type="checkbox" id="batchEditApply_Country"></div>
                            <label for="batchEditCountry" class="col-3 col-form-label">Country</label>
                            <div class="col-8">
                                <input type="text" class="form-control form-control-sm" id="batchEditCountry" placeholder="e.g. US, IN">
                            </div>
                        </div>
                         <div class="form-group form-row align-items-center">
                            <div class="col-1"><input type="checkbox" id="batchEditApply_Language"></div>
                            <label for="batchEditLanguage" class="col-3 col-form-label">Language</label>
                            <div class="col-8">
                                <input type="text" class="form-control form-control-sm" id="batchEditLanguage" placeholder="e.g., English, Hindi">
                            </div>
                        </div>

                        <button type="submit" class="btn btn-primary mt-3"><i class="fas fa-save"></i> Apply Changes to Selected</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
<!-- END CHUNK: Modal - Batch Edit -->

<!-- START CHUNK: Modal - About -->
    <div class="modal fade" id="aboutModal" tabindex="-1" role="dialog" aria-labelledby="aboutModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content fade-up">
                <div class="modal-header">
                    <h5 class="modal-title" id="aboutModalLabel">About KeepMoviEZ</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"> <span aria-hidden="true">&times;</span> </button>
                </div>
                <div class="modal-body about-modal-body" style="max-height: 70vh; overflow-y: auto;">
                    
                    <div class="about-hero">
                        <i class="fas fa-film about-hero-icon"></i>
                        <p>KeepMoviEZ is your personal companion for tracking every step of your cinematic journey. The name itself comes from our core mission: to make <strong>keep</strong>ing track of <strong>movi</strong>es <strong>e</strong>a<strong>z</strong>y.</p>
                        <p class="text-muted">At our core is a deep respect for your privacy. The app works perfectly offline, and with optional cloud sync, your data is always yours—never analyzed, shared, or sold. You are always in control.</p>
                    </div>

                    <hr>

                    <h4>Key Features</h4>
                    <div class="features-list">
                        <div class="feature-item">
                            <i class="fas fa-pencil-alt"></i>
                            <div><strong>Log Everything</strong><small>Track movies, series, and specials with detailed progress, ratings, and personal notes.</small></div>
                        </div>
                        <div class="feature-item">
                            <i class="fas fa-database"></i>
                            <div><strong>Powerful Data Enrichment</strong><small>Automatically fetch rich details like posters, cast, crew, and more from TMDB.</small></div>
                        </div>
                         <div class="feature-item">
                            <i class="fas fa-chart-pie"></i>
                            <div><strong>Discover Your Story</strong><small>Uncover insights with detailed stats, visual charts, and unlock fun achievements.</small></div>
                        </div>
                        <div class="feature-item">
                            <i class="fas fa-magic"></i>
                            <div><strong>Intelligent Suggestions</strong><small>Explore the "Engine Suggestions" hub to find similar content based on your favorites.</small></div>
                        </div>
                        <div class="feature-item">
                            <i class="fas fa-tasks"></i>
                            <div><strong>Effortless Management</strong><small>Use powerful search, filtering, and batch editing tools to manage your library with ease.</small></div>
                        </div>
                    </div>

                    <hr>

                    <h4>Credits & Technologies</h4>
                    <p class="text-muted small">This application would not be possible without the incredible work of others. We are deeply grateful to the following services and communities:</p>
                    <div class="credits-grid">
                        <div class="credit-item">
                            <div class="credit-icon tmdb-color">  
                                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 190.24 81.52"><defs><style>.cls-1{fill:url(#linear-gradient);}</style><linearGradient id="linear-gradient" y1="40.76" x2="190.24" y2="40.76" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#90cea1"/><stop offset="0.56" stop-color="#3cbec9"/><stop offset="1" stop-color="#00b3e5"/></linearGradient></defs><title>Asset 2</title><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path class="cls-1" d="M105.67,36.06h66.9A17.67,17.67,0,0,0,190.24,18.4h0A17.67,17.67,0,0,0,172.57.73h-66.9A17.67,17.67,0,0,0,88,18.4h0A17.67,17.67,0,0,0,105.67,36.06Zm-88,45h76.9A17.67,17.67,0,0,0,112.24,63.4h0A17.67,17.67,0,0,0,94.57,45.73H17.67A17.67,17.67,0,0,0,0,63.4H0A17.67,17.67,0,0,0,17.67,81.06ZM10.41,35.42h7.8V6.92h10.1V0H.31v6.9h10.1Zm28.1,0h7.8V8.25h.1l9,27.15h6l9.3-27.15h.1V35.4h7.8V0H66.76l-8.2,23.1h-.1L50.31,0H38.51ZM152.43,55.67a15.07,15.07,0,0,0-4.52-5.52,18.57,18.57,0,0,0-6.68-3.08,33.54,33.54,0,0,0-8.07-1h-11.7v35.4h12.75a24.58,24.58,0,0,0,7.55-1.15A19.34,19.34,0,0,0,148.11,77a16.27,16.27,0,0,0,4.37-5.5,16.91,16.91,0,0,0,1.63-7.58A18.5,18.5,0,0,0,152.43,55.67ZM145,68.6A8.8,8.8,0,0,1,142.36,72a10.7,10.7,0,0,1-4,1.82,21.57,21.57,0,0,1-5,.55h-4.05v-21h4.6a17,17,0,0,1,4.67.63,11.66,11.66,0,0,1,3.88,1.87A9.14,9.14,0,0,1,145,59a9.87,9.87,0,0,1,1,4.52A11.89,11.89,0,0,1,145,68.6Zm44.63-.13a8,8,0,0,0-1.58-2.62A8.38,8.38,0,0,0,185.63,64a10.31,10.31,0,0,0-3.17-1v-.1a9.22,9.22,0,0,0,4.42-2.82,7.43,7.43,0,0,0,1.68-5,8.42,8.42,0,0,0-1.15-4.65,8.09,8.09,0,0,0-3-2.72,12.56,12.56,0,0,0-4.18-1.3,32.84,32.84,0,0,0-4.62-.33h-13.2v35.4h14.5a22.41,22.41,0,0,0,4.72-.5,13.53,13.53,0,0,0,4.28-1.65,9.42,9.42,0,0,0,3.1-3,8.52,8.52,0,0,0,1.2-4.68A9.39,9.39,0,0,0,189.66,68.47ZM170.21,52.72h5.3a10,10,0,0,1,1.85.18,6.18,6.18,0,0,1,1.7.57,3.39,3.39,0,0,1,1.22,1.13,3.22,3.22,0,0,1,.48,1.82,3.63,3.63,0,0,1-.43,1.8,3.4,3.4,0,0,1-1.12,1.2,4.92,4.92,0,0,1-1.58.65,7.51,7.51,0,0,1-1.77.2h-5.65Zm11.72,20a3.9,3.9,0,0,1-1.22,1.3,4.64,4.64,0,0,1-1.68.7,8.18,8.18,0,0,1-1.82.2h-7v-8h5.9a15.35,15.35,0,0,1,2,.15,8.47,8.47,0,0,1,2.05.55,4,4,0,0,1,1.57,1.18,3.11,3.11,0,0,1,.63,2A3.71,3.71,0,0,1,181.93,72.72Z"/></g></g></svg>
                            </div>
                            <div class="credit-text">
                                <strong>The Movie Database (TMDB)</strong>
                                <small>The primary source for all movie, series, and person data.<br>
                                <b><i style="color: var(--warning-color)">This product uses the TMDB API but is not endorsed or certified by TMDB.</i></b> 
                                </small>
                            </div>
                        </div>
                        <div class="credit-item">
                            <div class="credit-icon supabase-color"><i class="fas fa-bolt"></i></div>
                            <div class="credit-text">
                                <strong>Supabase</strong>
                                <small>Provides the incredible open-source backend for our secure cloud sync features.</small>
                            </div>
                        </div>
                        <div class="credit-item">
                            <div class="credit-icon bootstrap-color"><i class="fab fa-bootstrap"></i></div>
                            <div class="credit-text"><strong>Bootstrap</strong><small>For the responsive UI framework.</small></div>
                        </div>
                        <div class="credit-item">
                            <div class="credit-icon chartjs-color"><i class="fas fa-chart-bar"></i></div>
                            <div class="credit-text"><strong>Chart.js</strong><small>For creating beautiful data visualizations.</small></div>
                        </div>
                         <div class="credit-item">
                            <div class="credit-icon"><i class="fab fa-font-awesome-flag"></i></div>
                            <div class="credit-text"><strong>Font Awesome</strong><small>For the extensive icon library.</small></div>
                        </div>
                         <div class="credit-item">
                            <div class="credit-icon jquery-color"><i class="fas fa-code"></i></div>
                            <div class="credit-text"><strong>jQuery</strong><small>For simplifying DOM manipulation.</small></div>
                        </div>
                        <div class="credit-item">
                            <div class="credit-icon"><i class="fas fa-file-csv"></i></div>
                            <div class="credit-text"><strong>PapaParse</strong><small>For robust in-browser CSV parsing.</small></div>
                        </div>
                    </div>

                    <h5 class="mt-4">External Service Links</h5>
                    <div class="credits-grid">
                        <div class="credit-item">
                            <div class="credit-icon youtube-color"><i class="fab fa-youtube"></i></div>
                            <div class="credit-text"><strong>YouTube</strong><small>For trailer search functionality.</small></div>
                        </div>
                        <div class="credit-item">
                            <div class="credit-icon imdb-color"><i class="fab fa-imdb"></i></div>
                            <div class="credit-text"><strong>IMDb</strong><small>For parental guide lookups.</small></div>
                        </div>
                         <div class="credit-item">
                            <div class="credit-icon"><i class="fas fa-play-circle"></i></div>
                            <div class="credit-text"><strong>JustWatch</strong><small>For streaming availability links.</small></div>
                        </div>
                    </div>

                    <hr>

                    <div class="creator-section">
                        <p class="mb-1">Crafted with ❤️ by Nishant Adhikari.</p>
                        <a href="https://nishantadhikari.info.np" target="_blank" rel="noopener noreferrer">Website</a> | 
                        <a href="https://www.instagram.com/nishant060211" target="_blank" rel="noopener noreferrer">Instagram</a>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
<!-- END CHUNK: Modal - About -->

<!-- START CHUNK: Toast Notification Component -->
      <div id="appToast" class="toast hide fade-up" role="alert" aria-live="assertive" aria-atomic="true" data-delay="3500">
        <div class="toast-header">
            <strong class="mr-auto" id="toastTitle">Notification</strong>
            <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">×</span> </button>
        </div>
        <div class="toast-body" id="toastBody"> Message here. </div>
        <div id="toastActions" class="toast-footer p-2 text-right" style="border-top: 1px solid rgba(0,0,0,0.05);"></div>
      </div>
    </div>
<!-- END CHUNK: Toast Notification Component -->

<!-- START CHUNK: JavaScript Libraries and Application Logic Scripts -->
    <!-- Local Base Libraries -->
    <script src="libs/js/jquery.min.js"></script>
    <script src="libs/js/popper.min.js"></script>
    <script src="libs/js/bootstrap.min.js"></script>
    <script src="libs/js/papaparse.min.js"></script>
    <script src="libs/js/chart.js"></script>
    
    <!-- Local PDF Export Libraries -->
    <script src="libs/js/html2canvas.min.js"></script>
    <script src="libs/js/jspdf.umd.min.js"></script>
    <script src="libs/js/jspdf.plugin.autotable.min.js"></script>

   <!-- Custom JS modules  -->
    <script src="js/constant.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/indexeddb.js"></script>
    <script src="js/data.js"></script>
    <script src="js/io1.js"></script>
    <script src="js/io2.js"></script>
    <script src="js/tmdb.js"></script>
    <script src="js/genre.js"></script>
    <script src="js/analysis.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/reporting.js"></script>
    <script src="js/app.js"></script>
    <script src="js/supabase.js"></script>
    <script src="js/main.js"></script>
<!-- END CHUNK: JavaScript Libraries and Application Logic Scripts -->

</body>
</html>
